<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FocusSentinel AI | Precision Study Monitoring</title>
    
    <!-- Dependencies -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/face_mesh.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js" crossorigin="anonymous"></script>
    
    <!-- Custom Assets -->
    <link rel="stylesheet" href="style.css">
</head>
<body class="antialiased">

    <!-- Cyber Setup Overlay -->
    <div id="setupOverlay" class="fixed inset-0 flex items-center justify-center p-4">
        <div class="glass-panel max-w-lg w-full rounded-[2.5rem] p-12 text-center relative overflow-hidden">
            <div class="absolute -top-24 -left-24 w-64 h-64 bg-cyan-500/10 rounded-full blur-3xl"></div>
            <div class="absolute -bottom-24 -right-24 w-64 h-64 bg-pink-500/10 rounded-full blur-3xl"></div>
            
            <div class="w-28 h-28 bg-cyan-500/10 border border-cyan-500/30 text-cyan-400 rounded-3xl flex items-center justify-center mx-auto mb-10 rotate-3 transition-all hover:rotate-12 hover:scale-110 duration-500">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-14 w-14" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
                </svg>
            </div>
            
            <h2 class="neon-title text-4xl font-bold mb-6 tracking-tighter text-white uppercase">Initialize Sentinel</h2>
            <p class="text-slate-400 mb-12 text-xl font-medium leading-relaxed max-w-sm mx-auto">
                Secure your workspace with neural-link visual monitoring.
            </p>
            
            <button id="requestPermissionBtn" class="btn-primary w-full py-5 rounded-2xl">
                <span>Engage Neural Link</span>
            </button>
            <p id="errorMessage" class="hidden mt-6 text-red-400 font-bold uppercase tracking-widest text-xs animate-pulse"></p>
        </div>
    </div>

    <div class="min-h-screen p-4 md:p-8 lg:p-12 relative flex flex-col">
        <!-- Dashboard Header -->
        <header class="max-w-[1600px] w-full mx-auto flex flex-col lg:flex-row justify-between items-center mb-12 gap-8">
            <div class="text-center lg:text-left">
                <div class="flex items-center gap-4 mb-2">
                    <div class="w-10 h-10 bg-cyan-500 rounded-lg flex items-center justify-center shadow-[0_0_20px_rgba(0,243,255,0.4)]">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-black" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M2.166 4.9L10 1.554L17.834 4.9c.452.194.75.658.75 1.154v2.09c0 3.141-1.42 6.082-3.834 8.04L10 19.33l-4.75-3.146C2.839 14.226 1.417 11.285 1.417 8.144V6.054c0-.496.298-.96.749-1.154zM10 14a4 4 0 110-8 4 4 0 010 8zm0-2a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd" />
                        </svg>
                    </div>
                    <h1 class="neon-title text-5xl font-bold text-white tracking-widest uppercase">
                        Focus<span class="text-cyan-400">Sentinel</span>
                    </h1>
                </div>
                <p class="text-cyan-400/60 font-black tracking-[0.4em] uppercase text-xs ml-14">Neural Monitoring Active // Local Secure Feed</p>
            </div>
            
            <div class="flex items-center gap-8">
                <div id="statusBadge" class="px-6 py-3 rounded-full border border-slate-700 bg-slate-900/50 text-slate-400 font-black uppercase tracking-widest text-xs flex items-center gap-3">
                    <div class="w-2.5 h-2.5 rounded-full bg-slate-600"></div>
                    Offline
                </div>
                <button id="stopBtn" class="hidden btn-outline px-10 py-3 rounded-full font-black uppercase tracking-widest text-xs border-red-500/30 text-red-500 hover:bg-red-500/10 hover:border-red-500">
                    Terminate Session
                </button>
            </div>
        </header>

        <main class="max-w-[1600px] w-full mx-auto grid grid-cols-1 lg:grid-cols-12 gap-10 flex-grow">
            
            <!-- Left: Controls & Stats -->
            <div class="lg:col-span-3 space-y-8 order-2 lg:order-1">
                <!-- Pomodoro Engine -->
                <div class="glass-panel p-8 rounded-[2rem] border-pink-500/20">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-sm font-black text-slate-400 uppercase tracking-widest">Focus Cycle</h2>
                        <span id="pomoLabel" class="text-[10px] px-2 py-0.5 bg-pink-500/20 text-pink-400 rounded-full font-bold">READY</span>
                    </div>
                    <div class="text-center mb-8">
                        <div id="pomoTimer" class="text-6xl font-bold text-white mb-2 tabular-nums">25:00</div>
                        <div class="text-xs text-slate-500 uppercase tracking-widest">Deep Work Session</div>
                    </div>
                    <div class="flex gap-3">
                        <button id="pomoStart" class="btn-primary flex-grow py-3 rounded-xl text-sm">Start</button>
                        <button id="pomoReset" class="btn-outline px-4 py-3 rounded-xl text-sm">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 110 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z" clip-rule="evenodd" />
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Session Analytics -->
                <div class="glass-panel p-8 rounded-[2rem] border-cyan-500/20">
                    <h2 class="text-sm font-black text-slate-400 mb-6 uppercase tracking-widest">Stability Map</h2>
                    <div class="chart-container">
                        <canvas id="stabilityChart"></canvas>
                    </div>
                    <div class="mt-6 pt-6 border-t border-white/5 space-y-4">
                        <div class="flex justify-between items-center text-xs">
                            <span class="text-slate-500 font-bold uppercase">Consistency</span>
                            <span id="consistencyScore" class="text-cyan-400 font-black">--%</span>
                        </div>
                        <div class="w-full bg-slate-800 h-1.5 rounded-full overflow-hidden">
                            <div id="consistencyBar" class="bg-cyan-500 h-full transition-all duration-1000" style="width: 0%"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Center: Visual Feed -->
            <div class="lg:col-span-6 space-y-8 order-1 lg:order-2">
                <div class="glass-panel p-3 rounded-[3rem] relative shadow-[0_0_80px_rgba(0,0,0,0.6)]">
                    <div id="videoFrame" class="video-container neon-border-cyan">
                        <div class="scanline"></div>
                        <video id="input_video" playsinline></video>
                        <canvas id="output_canvas"></canvas>
                        
                        <!-- HUD Alert -->
                        <div id="alertOverlay" class="absolute inset-0 bg-red-950/60 pointer-events-none opacity-0 transition-all duration-300 flex items-center justify-center p-8">
                            <div class="text-center">
                                <div class="mb-4 inline-block p-4 rounded-full bg-red-500 text-black animate-bounce">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                                    </svg>
                                </div>
                                <h3 class="text-6xl font-black uppercase italic tracking-tighter text-red-500 glow-text-red mb-2">Focus Broken</h3>
                                <p class="text-lg font-black text-white/90 uppercase tracking-[0.4em]">Neural Link Unstable</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Live Metrics Ticker -->
                <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
                    <div class="glass-panel p-6 rounded-2xl border-cyan-500/20 text-center relative overflow-hidden group">
                        <div class="absolute inset-0 bg-cyan-500/5 translate-y-full group-hover:translate-y-0 transition-transform"></div>
                        <p class="text-[10px] text-cyan-400 font-black tracking-widest mb-3 uppercase opacity-60">Focus Index</p>
                        <p id="attentionScore" class="text-4xl font-bold text-white glow-text-cyan relative">0%</p>
                    </div>
                    <div class="glass-panel p-6 rounded-2xl border-white/5 text-center group">
                        <p class="text-[10px] text-slate-500 font-black tracking-widest mb-3 uppercase opacity-60">Uptime</p>
                        <p id="timer" class="text-4xl font-bold text-white tabular-nums group-hover:text-cyan-400 transition-colors">00:00</p>
                    </div>
                    <div class="glass-panel p-6 rounded-2xl border-red-500/10 text-center group">
                        <p class="text-[10px] text-red-400 font-black tracking-widest mb-3 uppercase opacity-60">Violations</p>
                        <p id="violationCount" class="text-4xl font-bold text-red-500 glow-text-red">0</p>
                    </div>
                    <div class="glass-panel p-6 rounded-2xl border-white/5 text-center relative overflow-hidden">
                        <p class="text-[10px] text-slate-500 font-black tracking-widest mb-3 uppercase opacity-60">Aura State</p>
                        <p id="focusState" class="text-xl font-bold text-cyan-400 uppercase tracking-tighter">Standby</p>
                    </div>
                </div>
            </div>

            <!-- Right: Event Stream -->
            <div class="lg:col-span-3">
                <div class="glass-panel p-8 rounded-[2rem] border-slate-700/30 h-full flex flex-col">
                    <div class="flex justify-between items-center mb-8">
                        <h2 class="text-sm font-black text-slate-400 uppercase tracking-widest flex items-center gap-3">
                            <span class="w-1.5 h-1.5 rounded-full bg-cyan-500 animate-pulse"></span>
                            Neural Stream
                        </h2>
                        <span class="text-[9px] font-mono text-slate-600">LIVE_LOGS</span>
                    </div>
                    
                    <div id="logContainer" class="log-container space-y-4 overflow-y-auto flex-grow max-h-[500px] pr-3">
                        <div class="flex flex-col items-center justify-center h-48 text-slate-600 text-center space-y-4">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 opacity-20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M13 10V3L4 14h7v7l9-11h-7z" />
                            </svg>
                            <p class="text-xs font-medium uppercase tracking-widest italic">Awaiting pulse signal...</p>
                        </div>
                    </div>
                    
                    <div class="mt-8 space-y-4">
                        <button id="downloadLog" class="btn-outline w-full py-4 rounded-2xl text-[10px] font-black uppercase tracking-widest">
                            Export Telemetry
                        </button>
                    </div>
                </div>
            </div>
        </main>
        
        <footer class="max-w-[1600px] w-full mx-auto mt-12 py-8 border-t border-white/5 flex justify-between items-center text-[10px] text-slate-600 font-black uppercase tracking-[0.3em]">
            <span>Secure Protocol v2.5.0-Release</span>
            <span class="flex items-center gap-4">
                <span class="p-1 rounded bg-green-500/10 text-green-500">GPU Acceleration Active</span>
                <span>Â© 2026 StudyGuard Bio-Tech</span>
            </span>
        </footer>
    </div>

    <!-- Core Logic -->
    <script src="script.js"></script>
</body>
</html>